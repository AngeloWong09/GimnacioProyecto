
@page "/EntrenadorEmitirFacturas"

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenido a GYM FAST FORCE</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <h1 class="title">Bienvenido a GYM FAST FORCE</h1>

    <form id="loginForm" onsubmit="return login(event)">
        <div class="form-group">
            <label for="user">Usuario:</label>
            <input type="text" id="user" required />
        </div>
        <div class="form-group">
            <label for="password">Contraseña:</label>
            <input type="password" id="password" required />
        </div>
        <button type="submit">Login</button>
    </form>

    <h2>Mostrar Archivo CSV</h2>
    <div>
        <input type="file" id="csvFileInput" accept=".csv" onchange="procesarCSV(event)" />
    </div>
    <br />

    <!-- Campo de texto para verificar ID -->
    <h2>Verificar ID</h2>
    <div>
        <label for="idInput">Ingrese ID de Administrador:</label>
        <input type="text" id="idInput" placeholder="Ejemplo: AdministradorID" oninput="verificarID()" />
    </div>
    <br />

    <div id="mensaje" style="color: green; font-size: 18px;"></div>

    <script src="script.js"></script>

    <script>
        let datosCSV = [];

        // Función de login
        function login(event) {
            event.preventDefault();
            var username = document.getElementById("user").value;
            var password = document.getElementById("password").value;

            if (username === "Leinix" && password === "0") {
                window.location.href = "/Administrador";
            } else if (username === "Ana" && password === "0") {
                window.location.href = "/Cliente";
            } else if (username === "Tobi" && password === "0") {
                window.location.href = "/EntrenadorL";
            } else {
                alert("Usuario o contraseña incorrectos.");
            }
        }

        // Cargar CSV de los diferentes tipos de usuario automáticamente
        window.onload = function () {
            cargarCSV("administrador.csv");
            cargarCSV("cliente.csv");
            cargarCSV("entrenador.csv");
        };

        // Cargar archivo CSV automáticamente
        function cargarCSV(archivoNombre) {
            fetch(archivoNombre)
                .then(response => response.text())
                .then(data => {
                    procesarDatosCSV(data);
                    mostrarNotificacion(`Archivo ${archivoNombre} cargado correctamente.`);
                })
                .catch(error => {
                    mostrarNotificacion(`Error al cargar el archivo ${archivoNombre}: ${error}`, "red");
                });
        }

        // Procesar CSV
        function procesarDatosCSV(data) {
            const lineas = data.split("\n");

            for (let linea of lineas) {
                if (linea.trim() === "") continue;
                const columnas = linea.split(";");
                if (columnas.length === 8 || columnas.length === 7) {
                    datosCSV.push(columnas);
                }
            }
        }

        // Mostrar notificación en la pantalla
        function mostrarNotificacion(mensaje, color = "green") {
            const mensajeElemento = document.getElementById("mensaje");
            mensajeElemento.textContent = mensaje;
            mensajeElemento.style.color = color;
        }

        // Verificar el ID ingresado y mostrar "Éxito" si coincide con Administrador
        function verificarID() {
            const idInput = document.getElementById("idInput").value.trim();
            const idAdministrador = "AdministradorID"; // Define el ID único del Administrador
            const mensajeElemento = document.getElementById("mensaje");

            if (idInput === idAdministrador) {
                mensajeElemento.textContent = "¡Éxito! Has ingresado el ID del Administrador.";
                mensajeElemento.style.color = "green";
            } else {
                mensajeElemento.textContent = "";
            }
        }

    </script>
</body>
</html>
